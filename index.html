<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quotation Management System</title>
    <link rel="icon" href="singer-sri-lanka-seeklogo.png" type="image/x-icon">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .content {
            padding: 40px;
        }

        .form-section {
            margin-bottom: 40px;
        }

        .section-title {
            color: #2c3e50;
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }

        input[type="text"], input[type="tel"], input[type="date"], textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .items-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .item-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr 1fr auto;
            gap: 15px;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.6);
        }

        .btn-success {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.4);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 204, 113, 0.6);
        }

        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            padding: 8px 12px;
            font-size: 14px;
        }

        .btn-danger:hover {
            transform: scale(1.05);
        }

        .total-section {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
        }

        .total-amount {
            font-size: 2rem;
            font-weight: bold;
            margin-top: 10px;
        }

        .button-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .preview-section {
            margin-top: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }

        .quotation-preview {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
        }

        .company-header {
            text-align: center;
            border-bottom: 2px solid #2c3e50;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .company-name {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .quotation-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .customer-info, .company-info {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
        }

        .items-table th, .items-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .items-table th {
            background: #2c3e50;
            color: white;
            font-weight: bold;
        }

        .items-table tr:nth-child(even) {
            background: #f9f9f9;
        }

        .terms-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .signature-container {
            margin-top: 30px;
            text-align: right;
        }

        .signature-img {
            height: 50px;
            margin-bottom: 5px;
        }

        .signature-text {
            font-weight: bold;
            border-top: 1px solid #2c3e50;
            padding-top: 5px;
            display: inline-block;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .item-row {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .button-group {
                flex-direction: column;
            }
        }




    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ§¾ Quotation Management System</h1>
            <p>Create professional quotations with ease</p>
        </div>

        <div class="content">
            <form id="quotationForm">
                <!-- Company Information -->
                <div class="form-section">
                    <h2 class="section-title">Company Information</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="companyName">Company Name</label>
                            <input type="text" id="companyName" value="SINGER SRI LANKA PLC">
                        </div>
                        <div class="form-group">
                            <label for="branchName">Branch Name</label>
                            <input type="text" id="branchName" value="GALLE-B">
                        </div>
                        <div class="form-group">
                            <label for="companyAddress">Address</label>
                            <input type="text" id="companyAddress" value="NO. 176, MAIN STREET, GALLE">
                        </div>
                        <div class="form-group">
                            <label for="companyPhone">Phone</label>
                            <input type="tel" id="companyPhone" value="091-2247148">
                        </div>
                        <div class="form-group">
                            <label for="vatNo">VAT No</label>
                            <input type="text" id="vatNo" value="124008026 7000">
                        </div>
                        <div class="form-group">
                            <label for="quotationDate">Date</label>
                            <input type="date" id="quotationDate">
                        </div>
                    </div>
                </div>

                <!-- Customer Information -->
                <div class="form-section">
                    <h2 class="section-title">Customer Information</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="customerName">Customer Name</label>
                            <input type="text" id="customerName" required>
                        </div>
                        <div class="form-group">
                            <label for="customerCompany">Company Name</label>
                            <input type="text" id="customerCompany">
                        </div>
                        <div class="form-group">
                            <label for="customerAddress">Address</label>
                            <input type="text" id="customerAddress">
                        </div>
                        <div class="form-group">
                            <label for="customerCity">City</label>
                            <input type="text" id="customerCity">
                        </div>
                        <div class="form-group">
                            <label for="customerPhone">Phone</label>
                            <input type="tel" id="customerPhone">
                        </div>
                    </div>
                </div>

                <!-- Items Section -->
                <div class="form-section">
                    <h2 class="section-title">Items</h2>
                    <div class="items-section">
                        <div id="itemsContainer">
                            <div class="item-row">
                                <input type="text" placeholder="Model/Description" class="item-description">
                                <input type="number" placeholder="Qty" class="item-qty" min="1" value="1">
                                <input type="number" placeholder="Unit Price" class="item-price" step="0.01">
                                <input type="number" placeholder="Discount %" class="item-discount" step="0.01" value="0">
                                <input type="number" placeholder="Warranty Cost" class="item-warranty" step="0.01" value="0">
                                <input type="text" placeholder="Total" class="item-total" readonly>
                                <button type="button" class="btn btn-danger" onclick="removeItem(this)">Remove</button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="addItem()">Add Item</button>
                    </div>
                </div>

                <!-- Terms and Conditions -->
                <div class="form-section">
                    <h2 class="section-title">Terms & Conditions</h2>
                    <div class="form-group">
                        <label for="warranty">Warranty</label>
                        <input type="text" id="warranty" value="One Year Warranty  [Ex.Warranty : 3 years (optional)]">
                    </div>
                    <div class="form-group">
                        <label for="delivery">Delivery</label>
                        <input type="text" id="delivery" value="Ex-stock, subject to the availability at time of placing order.">
                    </div>
                    <div class="form-group">
                        <label for="paymentTerms">Payment Terms</label>
                        <textarea id="paymentTerms" rows="3">Full Payment upon confirmation of order.</textarea>
                    </div>
                    <div class="form-group">
                        <label for="additionalNotes">Additional Notes</label>
                        <textarea id="additionalNotes" rows="3">We trust our offer meets with your approval and look forward to your valued order.</textarea>
                    </div>
                </div>

                <!-- Total Section -->
                <div class="total-section">
                    <h3>Total Amount</h3>
                    <div class="total-amount" id="grandTotal">Rs. 0.00</div>
                </div>

                <!-- Buttons -->
                <div class="button-group">
                    <button type="button" class="btn btn-primary" onclick="previewQuotation()">Preview Quotation</button>
                    <button type="button" class="btn btn-success" onclick="generatePDF()">Generate PDF</button>
                </div>
            </form>

            <!-- Preview Section -->
            <div class="preview-section" id="previewSection">
                <h2 class="section-title">Quotation Preview</h2>
                <div class="quotation-preview" id="quotationPreview">
                    <!-- Preview content will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set today's date as default
        document.getElementById('quotationDate').value = new Date().toISOString().split('T')[0];

        // Add item functionality
        function addItem() {
            const container = document.getElementById('itemsContainer');
            const newItem = document.createElement('div');
            newItem.className = 'item-row';
            newItem.innerHTML = `
                <input type="text" placeholder="Model/Description" class="item-description">
                <input type="number" placeholder="Qty" class="item-qty" min="1" value="1">
                <input type="number" placeholder="Unit Price" class="item-price" step="0.01">
                <input type="number" placeholder="Discount %" class="item-discount" step="0.01" value="0">
                <input type="number" placeholder="Warranty Cost" class="item-warranty" step="0.01" value="0">
                <input type="text" placeholder="Total" class="item-total" readonly>
                <button type="button" class="btn btn-danger" onclick="removeItem(this)">Remove</button>
            `;
            container.appendChild(newItem);
            attachEventListeners(newItem);
        }

        // Remove item functionality
        function removeItem(button) {
            if (document.querySelectorAll('.item-row').length > 1) {
                button.parentElement.remove();
                calculateTotal();
            } else {
                alert('At least one item is required.');
            }
        }

        // Attach event listeners to item inputs
        function attachEventListeners(itemRow) {
            const inputs = itemRow.querySelectorAll('.item-qty, .item-price, .item-discount, .item-warranty');
            inputs.forEach(input => {
                input.addEventListener('input', () => calculateItemTotal(itemRow));
            });
        }

        // Calculate individual item total
        function calculateItemTotal(itemRow) {
            const qty = parseFloat(itemRow.querySelector('.item-qty').value) || 0;
            const price = parseFloat(itemRow.querySelector('.item-price').value) || 0;
            const discount = parseFloat(itemRow.querySelector('.item-discount').value) || 0;
            const warranty = parseFloat(itemRow.querySelector('.item-warranty').value) || 0;
            
            const subtotal = qty * price;
            const discountAmount = (subtotal * discount) / 100;
            const warrantyTotal = qty * warranty;
            const total = subtotal - discountAmount + warrantyTotal;
            
            itemRow.querySelector('.item-total').value = total.toFixed(2);
            calculateTotal();
        }

        // Calculate grand total
        function calculateTotal() {
            let grandTotal = 0;
            document.querySelectorAll('.item-total').forEach(input => {
                grandTotal += parseFloat(input.value) || 0;
            });
            document.getElementById('grandTotal').textContent = `Rs. ${grandTotal.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
        }

        // Preview quotation
        function previewQuotation() {
            const preview = document.getElementById('quotationPreview');
            const items = getItemsData();
            
            let itemsHTML = '';
            let total = 0;
            
            items.forEach((item, index) => {
                const itemTotal = item.qty * item.price * (1 - item.discount / 100) + (item.qty * item.warranty);
                total += itemTotal;
                itemsHTML += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${item.description}</td>
                        <td>${item.qty}</td>
                        <td>Rs. ${item.price.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                        <td>${item.discount}%</td>
                        <td>Rs. ${item.warranty.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                        <td>Rs. ${itemTotal.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                    </tr>
                `;
            });

            preview.innerHTML = `
                <div class="company-header">
                    <div class="company-name">${document.getElementById('companyName').value}</div>
                    <div>${document.getElementById('branchName').value}</div>
                    <div>QUOTATION</div>
                    <div>DATE: ${document.getElementById('quotationDate').value}</div>
                </div>

                <div class="quotation-info">
                    <div class="company-info">
                        <h4>FROM:</h4>
                        <p><strong>${document.getElementById('companyName').value}</strong></p>
                        <p>${document.getElementById('companyAddress').value}</p>
                        <p>Phone: ${document.getElementById('companyPhone').value}</p>
                        <p>VAT NO: ${document.getElementById('vatNo').value}</p>
                    </div>
                    <div class="customer-info">
                        <h4>TO:</h4>
                        <p><strong>${document.getElementById('customerName').value}</strong></p>
                        <p>${document.getElementById('customerCompany').value}</p>
                        <p>${document.getElementById('customerAddress').value}</p>
                        <p>${document.getElementById('customerCity').value}</p>
                        <p>Phone: ${document.getElementById('customerPhone').value}</p>
                    </div>
                </div>

                <table class="items-table">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Description</th>
                            <th>Qty</th>
                            <th>Unit Price</th>
                            <th>Discount</th>
                            <th>Warranty</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${itemsHTML}
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="6"><strong>GRAND TOTAL</strong></td>
                            <td><strong>Rs. ${total.toLocaleString('en-US', {minimumFractionDigits: 2})}</strong></td>
                        </tr>
                    </tfoot>
                </table>

                <div class="terms-section">
                    <h4>TERMS AND CONDITIONS</h4>
                    <p><strong>Warranty:</strong> ${document.getElementById('warranty').value}</p>
                    <p><strong>Delivery:</strong> ${document.getElementById('delivery').value}</p>
                    <p><strong>Payment Terms:</strong> ${document.getElementById('paymentTerms').value}</p>
                    <p><strong>Additional Notes:</strong> ${document.getElementById('additionalNotes').value}</p>
                </div>

                <div style="margin-top: 30px;">
                    <p>It is with great pleasure we at SINGER SRI LANKA PLC submit a proposal for the supply of Singer Consumer Durable to your Organization. We believe it is indeed a privilege, to serve a client in the caliber of your Organization, Which will assure you our best service attention for mutual benefits.</p>
                </div>

                <div class="signature-container">
                    <div class="signature-text">K.D.IMBULDENIYA</div>
                    <div class="signature-text">Senior Manager, Singerâ€“Plus Galle-B</div>
                </div>
            `;

            document.getElementById('previewSection').style.display = 'block';
            document.getElementById('previewSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Get items data
        function getItemsData() {
            const items = [];
            document.querySelectorAll('.item-row').forEach(row => {
                const description = row.querySelector('.item-description').value;
                const qty = parseFloat(row.querySelector('.item-qty').value) || 0;
                const price = parseFloat(row.querySelector('.item-price').value) || 0;
                const discount = parseFloat(row.querySelector('.item-discount').value) || 0;
                const warranty = parseFloat(row.querySelector('.item-warranty').value) || 0;
                
                if (description && qty > 0 && price > 0) {
                    items.push({ description, qty, price, discount, warranty });
                }
            });
            return items;
        }

        // Generate PDF
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Professional header with red theme
            doc.setFillColor(139, 0, 0); // Dark red
            doc.rect(0, 0, 210, 55, 'F');
            
            // Add subtle corner elements
            doc.setFillColor(220, 20, 60); // Crimson
            doc.triangle(0, 0, 25, 0, 0, 25, 'F');
            doc.triangle(185, 0, 210, 0, 210, 25, 'F');
            
            // Company header with white text
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(20);
            doc.setFont('helvetica', 'bold');
            doc.text(document.getElementById('companyName').value, 105, 18, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont('helvetica', 'normal');
            doc.text(document.getElementById('branchName').value, 105, 28, { align: 'center' });
            
            
            // QUOTATION title with red gradient
            doc.setFillColor(220, 20, 60); // Crimson
            doc.roundedRect(80, 32, 50, 10, 2, 2, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text('QUOTATION', 105, 38, { align: 'center' });
            
            // Date
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.text(`DATE: ${document.getElementById('quotationDate').value}`, 105, 48, { align: 'center' });
            
            
            // Reset text color for content
            doc.setTextColor(0, 0, 0);
            
            // Company info section
            doc.setFillColor(250, 250, 250); // Very light gray
            doc.roundedRect(15, 65, 85, 50, 2, 2, 'F');
            doc.setDrawColor(139, 0, 0); // Dark red border
            doc.setLineWidth(0.5);
            doc.roundedRect(15, 65, 85, 50, 2, 2, 'S');
            
            // FROM header
            doc.setFillColor(139, 0, 0); // Dark red
            doc.roundedRect(17, 67, 22, 7, 1, 1, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'bold');
            doc.text('FROM:', 19, 72);
            
            // Company details
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'bold');
            doc.text(document.getElementById('companyName').value, 20, 82);
            doc.setFont('helvetica', 'normal');
            doc.text(document.getElementById('companyAddress').value, 20, 90);
            doc.text(`Phone: ${document.getElementById('companyPhone').value}`, 20, 98);
            
            // VAT with red accent
            doc.setTextColor(139, 0, 0);
            doc.setFont('helvetica', 'bold');
            doc.text('VAT NO: ', 20, 106);
            doc.setTextColor(0, 0, 0);
            doc.setFont('helvetica', 'normal');
            doc.text(document.getElementById('vatNo').value, 35, 106);
            doc.text(document.getElementById('vatNo').value, 35, 106);
            doc.text('galle_b@singersl.com', 20, 113);
            
            // Customer info section
            doc.setFillColor(253, 245, 245); // Very light red
            doc.roundedRect(110, 65, 85, 50, 2, 2, 'F');
            doc.setDrawColor(139, 0, 0);
            doc.setLineWidth(0.5);
            doc.roundedRect(110, 65, 85, 50, 2, 2, 'S');
            
            // TO header
            doc.setFillColor(139, 0, 0);
            doc.roundedRect(112, 67, 15, 7, 1, 1, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'bold');
            doc.text('TO:', 115, 72);
            
            // Customer details
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'bold');
            doc.text(document.getElementById('customerName').value, 115, 82);
            doc.setFont('helvetica', 'normal');
            doc.text(document.getElementById('customerCompany').value, 115, 90);
            doc.text(document.getElementById('customerAddress').value, 115, 98);
            doc.text(`${document.getElementById('customerCity').value}`, 115, 106);
            
            // Items table
            const items = getItemsData();
            let yPos = 130;
            let total = 0;
            
            // Table header
            doc.setFillColor(139, 0, 0); // Dark red
            doc.rect(15, yPos - 5, 180, 10, 'F');
            
            // Table headers with white text
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'bold');
            doc.text('No.', 20, yPos);
            doc.text('Description', 35, yPos);
            doc.text('Qty', 100, yPos);
            doc.text('Unit Price', 110, yPos);
            doc.text('Discount', 135, yPos);
            doc.text('Ex.Warranty', 155, yPos);
            doc.text('Total', 177, yPos);
            
            yPos += 8;
            doc.setTextColor(0, 0, 0);
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(8);
            
            // Items with alternating backgrounds
            items.forEach((item, index) => {
                const itemTotal = item.qty * item.price * (1 - item.discount / 100) + (item.qty * item.warranty);
                total += itemTotal;
                
                // Alternate row background
                if (index % 2 === 0) {
                    doc.setFillColor(248, 248, 248);
                    doc.rect(15, yPos - 3, 180, 7, 'F');
                }
                
                doc.text((index + 1).toString(), 20, yPos);
                const description = doc.splitTextToSize(item.description, 65);
doc.text(description, 35, yPos);

                doc.text(item.qty.toString(), 100, yPos);
                doc.text(`Rs. ${item.price.toFixed(2)}`, 110, yPos);
                
                // Discount in red if > 0
                if (item.discount > 0) {
                    doc.setTextColor(220, 20, 60);
                    doc.text(`${item.discount}%`, 135, yPos);
                    doc.setTextColor(0, 0, 0);
                } else {
                    doc.text(`${item.discount}%`, 135, yPos);
                }
                
                // Warranty cost
                doc.text(`Rs. ${item.warranty.toFixed(2)}`, 155, yPos);
                
                // Item total
                doc.text(`Rs. ${itemTotal.toFixed(2)}`, 177, yPos);
                yPos += 7;
            });
            
            // Grand Total
            doc.setFillColor(139, 0, 0);
            doc.roundedRect(15, yPos + 2, 180, 7, 2, 2, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text(`GRAND TOTAL: Rs. ${total.toLocaleString('en-US', {minimumFractionDigits: 2})}`, 105, yPos + 7, { align: 'center' });
            
            // Terms and conditions
            yPos += 14;
            
            // Terms header
            doc.setFillColor(220, 20, 60); // Crimson
            doc.roundedRect(15, yPos - 3, 180, 6, 2, 2, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('TERMS AND CONDITIONS', 105, yPos + 2, { align: 'center' });
            
            // Terms content
            yPos += 9;
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            
            // Warranty
            doc.setFillColor(255, 240, 240); // Very light red
            doc.roundedRect(15, yPos - 2, 180, 7, 1, 1, 'F');
            doc.setTextColor(139, 0, 0);
            doc.setFont('helvetica', 'bold');
            doc.text('Warranty: ', 20, yPos + 1);
            doc.setTextColor(0, 0, 0);
            doc.setFont('helvetica', 'normal');
            doc.text(document.getElementById('warranty').value, 38, yPos + 1);
            
            // Delivery
            yPos += 7;
            doc.setFillColor(250, 250, 250);
            doc.roundedRect(15, yPos - 2, 180, 7, 1, 1, 'F');
            doc.setTextColor(139, 0, 0);
            doc.setFont('helvetica', 'bold');
            doc.text('Delivery: ', 20, yPos + 1);
            doc.setTextColor(0, 0, 0);
            doc.setFont('helvetica', 'normal');
            doc.text(document.getElementById('delivery').value, 35, yPos + 1);
            
            // Payment Terms
            yPos += 7;
            doc.setFillColor(255, 240, 240);
            doc.roundedRect(15, yPos - 2, 180, 7, 1, 1, 'F');
            doc.setTextColor(139, 0, 0);
            doc.setFont('helvetica', 'bold');
            doc.text('Payment: ', 20, yPos + 1);
            doc.setTextColor(0, 0, 0);
            doc.setFont('helvetica', 'normal');
            doc.text(document.getElementById('paymentTerms').value, 35, yPos + 1);


            //additional Note
            yPos += 7;
            doc.setFillColor(250, 250, 250);
            doc.roundedRect(15, yPos - 2, 180, 7, 1, 1, 'F');
            doc.setTextColor(139, 0, 0);
            doc.setFont('helvetica', 'bold');
            doc.text('Note: ', 20, yPos + 1);
            doc.setTextColor(0, 0, 0);
            doc.setFont('helvetica', 'normal');
            doc.text(document.getElementById('additionalNotes').value, 35, yPos + 1);
            
            // Additional text
            yPos += 10;
const longText = "It is with great pleasure we at SINGER SRI LANKA PLC submit a proposal for the supply of Singer Consumer Durable to your Organization. We believe it is indeed a privilege to serve a client in the caliber of your Organization, which will assure you our best service attention for mutual benefits.";
const wrappedText = doc.splitTextToSize(longText, 170);
doc.text(wrappedText, 20, yPos);
yPos += wrappedText.length * 5 + 10; // Add spacing after paragraph

// Signature text â€” adjust yPos, no extra +25 needed
doc.setFontSize(10);
doc.setFont('helvetica', 'bold');
doc.text("K.D.IMBULDENIYA", 140, yPos);
doc.text("Senior Manager, Singerâ€“Plus Galle-B", 140, yPos + 6);

            
            // Professional footer
            doc.setFillColor(139, 0, 0);
            doc.rect(0, 280, 210, 17, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(8);
            doc.text('Thank you for choosing our services!', 105, 290, { align: 'center' });
            
            // Save PDF
            const fileName = `Quotation_${document.getElementById('customerName').value.replace(/\s+/g, '_')}_${document.getElementById('quotationDate').value}.pdf`;
            doc.save(fileName);
        }

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.item-row').forEach(attachEventListeners);
        });
    </script>
</body>
</html>